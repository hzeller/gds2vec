% (CC-BY-SA) H.Zeller 2022-03-18

/mm { 72 25.4 div mul } def

/font-size-micron 0.12 def

/layer-label-color { 0.8 0.8 0.8 } def
/bounding-box-color { 0.4 0.4 0.8 } def

% <offset-x> <offset-y> <layer> start-page
/start-page {
    /Helvetica findfont 3 mm scalefont setfont
    layer-label-color setrgbcolor
    10 mm 5 mm moveto (Layer ) show
    (    ) cvs show
    (  @  ) show
    display-scale (          ) cvs show
    (:1 scale) show
    stroke

    10 mm 20 mm translate
    0.001 mm display-scale mul dup scale
    translate   % Offset from the bounding box
    /Helvetica findfont font-size-micron scalefont setfont
    0.01 setlinewidth
} def

% <x> <y> <width> <height> show-bounding-box
/show-bounding-box {
    gsave
    bounding-box-color setrgbcolor
    4 2 roll
    moveto
    dup neg 3 1 roll
    0 exch rlineto
    0 rlineto
    0 exch rlineto
    closepath stroke
    grestore
} def

% <x> <y> <text> center-text
/center-text {
    3 1 roll
    moveto
    dup stringwidth pop
    2 div neg font-size-micron 2 div neg rmoveto
    show
} def
